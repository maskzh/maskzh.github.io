{"componentChunkName":"component---gatsby-theme-maskzh-src-templates-blog-post-tsx","path":"/zh/SSH使用指北/","result":{"data":{"site":{"siteMetadata":{"title":"ZYC's Blog"}},"markdownRemark":{"html":"<h3>使用密钥对登录</h3>\n<p>通过 <code>ssh</code> 登录 VPS 的方式，就两种方式，密码或者密钥。通常我们都会关闭密码登录，因为不够安全，而且经常要输入密码，麻烦。相反，使用密钥，则更便捷也更安全。</p>\n<p>是时候使用 <code>Ed25519</code> 算法来生成密钥对了，相对 <code>RSA</code> 更短、更安全且加密解密速度也更快。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ssh-keygen -o -a <span class=\"token number\">100</span> -t ed25519 -f ~/.ssh/id_ed25519 -C <span class=\"token string\">\"name@example.com\"</span></code></pre></div>\n<p>然后将密钥添加到 SSH Agent。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ssh-add ~/.ssh/id_ed25519</code></pre></div>\n<p>将公钥<code>id_ed25519.pub</code> 的内容填入 VPS 的 <code>~/.ssh/authorized_keys</code> 文件，然后不需要密码你就可以 <code>ssh</code> 上你的 VPS 了。</p>\n<p>推荐一个小工具 <code>ssh-copy-id</code>，Mac 上可以通过 <code>brew install ssh-copy-id</code> 来安装。它的使用方式和 <code>ssh</code> 一样。它会将公钥自动填入 VPS 的<code>~/.ssh/authorized_keys</code> 文件中。你只需要通过 <code>ssh-copy-id</code> 登录一次 VPS，下一次你就不需要再输入密码了。</p>\n<h3>使用 ssh config 文件</h3>\n<p>登录 VPS 免不了要输入 <code>ssh user@12.34.56.78</code>，记不住 IP 是肯定的事。如果<code>@</code>后面使用域名的话还好，但我们有更好的别名定义的方式，例如这样 <code>ssh a</code>，就可以登录 VPS 了。</p>\n<p>在你的电脑的 <code>~/.ssh</code> 下新建一个 <code>config</code> 文件。文件内容的格式如下。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Host *\n  AddKeysToAgent yes\n  UseKeychain yes\n  IdentityFile ~/.ssh/id_ed25519\n\nHost pi\n  HostName raspberrypi.local\n  User pi</code></pre></div>\n<p>现在可以通过 <code>ssh pi</code> 登录树莓派了。更多的配置项见<a href=\"https://www.ssh.com/ssh/config/\">SSH config file for OpenSSH client</a></p>\n<p>在 macOS Sierra 10.12.2 以及之后的版本，通过 ssh config 文件可以自动加载密钥，并且可以将它们存储在 Keychain 中。</p>","rawMarkdownBody":"\n### 使用密钥对登录\n\n通过 `ssh` 登录 VPS 的方式，就两种方式，密码或者密钥。通常我们都会关闭密码登录，因为不够安全，而且经常要输入密码，麻烦。相反，使用密钥，则更便捷也更安全。\n\n是时候使用 `Ed25519` 算法来生成密钥对了，相对 `RSA` 更短、更安全且加密解密速度也更快。\n\n```bash\nssh-keygen -o -a 100 -t ed25519 -f ~/.ssh/id_ed25519 -C \"name@example.com\"\n```\n\n然后将密钥添加到 SSH Agent。\n\n```bash\nssh-add ~/.ssh/id_ed25519\n```\n\n将公钥`id_ed25519.pub` 的内容填入 VPS 的 `~/.ssh/authorized_keys` 文件，然后不需要密码你就可以 `ssh` 上你的 VPS 了。\n\n推荐一个小工具 `ssh-copy-id`，Mac 上可以通过 `brew install ssh-copy-id` 来安装。它的使用方式和 `ssh` 一样。它会将公钥自动填入 VPS 的`~/.ssh/authorized_keys` 文件中。你只需要通过 `ssh-copy-id` 登录一次 VPS，下一次你就不需要再输入密码了。\n\n### 使用 ssh config 文件\n\n登录 VPS 免不了要输入 `ssh user@12.34.56.78`，记不住 IP 是肯定的事。如果`@`后面使用域名的话还好，但我们有更好的别名定义的方式，例如这样 `ssh a`，就可以登录 VPS 了。\n\n在你的电脑的 `~/.ssh` 下新建一个 `config` 文件。文件内容的格式如下。\n\n```\nHost *\n  AddKeysToAgent yes\n  UseKeychain yes\n  IdentityFile ~/.ssh/id_ed25519\n\nHost pi\n  HostName raspberrypi.local\n  User pi\n```\n\n现在可以通过 `ssh pi` 登录树莓派了。更多的配置项见[SSH config file for OpenSSH client](https://www.ssh.com/ssh/config/)\n\n在 macOS Sierra 10.12.2 以及之后的版本，通过 ssh config 文件可以自动加载密钥，并且可以将它们存储在 Keychain 中。\n","timeToRead":2,"wordCount":{"paragraphs":11,"sentences":11,"words":86},"frontmatter":{"title":"SSH 使用指北","tags":["Tech/SSH"],"created":"2020-07-19"}}},"pageContext":{"slug":"/SSH使用指北/","language":"zh","i18n":{"language":"zh","languages":["en","zh"],"defaultLanguage":"en","routed":true,"resources":{"zh":{"translation":{"home":"首页","not found":"找不到该页面","create date":"创建日期","search articles":"搜索","articles":"文章列表"}}},"originalPath":"/SSH使用指北/","path":"zh/SSH使用指北/"}}},"staticQueryHashes":["1985809839","1985809839","63159454"]}